/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/m/MessageToast","sap/ovp/app/resources","sap/ovp/cards/CommonUtils"],function(M,O,C){"use strict";var R={"changeHandler":{},"layers":{"VENDOR":true,"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};R.changeHandler.applyChange=function(c,o,p){var m=p.modifier,a=C.getApp(),b=a.getView(),u=a.getUIModel(),d=u.getProperty("/cards"),l=a.getLayout(),s=c.getContent().id,e=a._getCardId(s),A=p.appComponent,S={id:s,isLocalId:false},f=m.bySelector(S,A,b),i;for(i=0;i<d.length;i++){if(d[i].id===e){break;}}var g=d.splice(i,1);u.setProperty("/cards",d);c.setRevertData({id:s,oCard:g[0],index:i});m.setVisible(f,false);if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();if(L.aCards){L.updateCardVisibility([{id:L.getCardIdFromComponent(s),visibility:false}]);}}var h=O.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_REMOVE",[f.getComponentInstance().getComponentData().settings.title]);M.show(h,{duration:10000});l.rerender();return true;};R.changeHandler.revertChange=function(c,o,p){var m=p.modifier,a=C.getApp(),u=a.getUIModel(),b=u.getProperty("/cards"),l=a.getLayout(),r=c.getRevertData(),d=m.bySelector(r.id);b.splice(r.index,0,r.oCard);u.setProperty("/cards",b);m.setVisible(d,true);c.resetRevertData();if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();L.updateCardVisibility([{id:L.getCardIdFromComponent(r.id),visibility:true}]);}l.rerender();return true;};R.changeHandler.completeChangeContent=function(c,s,p){return;};return R;},true);
