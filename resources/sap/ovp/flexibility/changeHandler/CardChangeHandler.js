sap.ui.define(["sap/ovp/cards/CommonUtils"],function(C){'use strict';function g(){return{"changeHandler":{},"layers":{"VENDOR":true,"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};}var P={"changeHandler":{applyChange:function(o,p,m){var a=C.getApp();a.appendIncomingDeltaChange(o);return;},completeChangeContent:function(o,s,p){return;},revertChange:function(o,a,p){return;}},"layers":{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};var U={"changeHandler":"default","layers":{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};var H=g();var b=g();H.changeHandler.applyChange=function(o,a,p){return c(o,a,p,false);};H.changeHandler.revertChange=function(o,a,p){return _(o,a,p,true);};H.changeHandler.completeChangeContent=function(o,s,p){o.setContent(s.removedElement);};b.changeHandler.applyChange=function(o,a,p){return c(o,a,p,true);};b.changeHandler.revertChange=function(o,a,p){return _(o,a,p,false);};b.changeHandler.completeChangeContent=function(o,s,p){o.setContent({"id":s.revealedElementId});};function _(o,a,p,v){var m=p.modifier,A=p.appComponent,M=C.getApp(),u=M.getUIModel(),l=M.getLayout(),s=A.createId(o.getRevertData()),d=m.bySelector(s);m.setVisible(d,v);o.resetRevertData();if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();L.updateCardVisibility([{id:L.getCardIdFromComponent(s),visibility:v}]);}l.rerender();return true;}function c(o,d,p,v){var m=p.modifier,M=sap.ovp.cards.CommonUtils.getApp(),e=M&&M.getView();if(!e){throw new Error("Main view is not initialized yet.");}var u=M.getUIModel(),l=M.getLayout(),s=o.getContent().id,A=p.appComponent,f=A.createId(s),S={id:f,isLocalId:false},h=m.bySelector(S,A,e);var j=M.deltaChanges.filter(function(a){return a._oDefinition.selector.id===o._oDefinition.content.id&&a._oDefinition.changeType==="visibility";});if(M.aManifestOrderedCards){for(var i=0;i<M.aManifestOrderedCards.length;i++){var k=o._oDefinition.content.id;var n=k.indexOf("---")+3;var q=k.substring(n);if(M.aManifestOrderedCards[i].id===q.split("--")[1]){M.oView.oController.aManifestOrderedCards[i].visibility=o._oDefinition.changeType==="hideCardContainer"?false:true;}}}if(!M.aManifestOrderedCards||j.length===0){o.setRevertData(f);m.setVisible(h,v);if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();if(L.aCards){L.updateCardVisibility([{id:L.getCardIdFromComponent(f),visibility:v}]);}M.appendIncomingDeltaChange(o);}if(v){var r=e.byId(f);if(!r.getComponentInstance()&&M.bFinishedCardsCreationProcess){var t=M._getCardFromManifest(M._getCardId(f));M.recreateRTAClonedCard(t);}}l.rerender();return true;}return false;}return{HideCardContainer:H,UnhideCardContainer:b,PersonalizationDefaultConfig:P,UnhideControlConfig:U};});
